<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý hóa đơn</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        h2, h3 {
            color: #333;
        }
        .section {
            margin-bottom: 30px;
        }
        .stats, .orders {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            background: #f9f9f9;
        }
        .order {
            border-bottom: 1px solid #ddd;
            padding: 10px 0;
        }
        .order:last-child {
            border-bottom: none;
        }
        .order h4 {
            margin: 0;
        }
        .order p {
            margin: 5px 0;
        }
        .highlight {
            font-weight: bold;
            color: #007bff;
        }
    </style>
</head>
<body>
    <h1>Quản lý hóa đơn</h1>

    <!-- Thống kê tổng quan -->
    <div class="section">
        <h2>Thống kê tổng quan</h2>
        <div class="stats">
            <p><span class="highlight" id="total-customers">0</span> khách hàng</p>
            <p><span class="highlight" id="total-orders">0</span> hóa đơn</p>
            <p>Tổng doanh thu: <span class="highlight" id="total-revenue">0</span>₫</p>
        </div>
    </div>

    <!-- Danh sách hóa đơn -->
    <div class="section">
        <h2>Danh sách hóa đơn</h2>
        <div id="order-list" class="orders">
            <!-- Hóa đơn sẽ được hiển thị tại đây -->
        </div>
    </div>

    <!-- Sản phẩm bán chạy -->
    <div class="section">
        <h2>Sản phẩm bán chạy</h2>
        <ul id="top-products">
            <!-- Sản phẩm bán chạy sẽ được hiển thị tại đây -->
        </ul>
    </div>

    <script>
        // Mô phỏng dữ liệu từ localStorage
        localStorage.setItem('accounts', JSON.stringify([
            {
                name: "Nguyen Van A",
                email: "a@gmail.com",
                hoadon: [
                    { id: 1, total: 200000, items: [{ name: "Bánh mì", quantity: 2, price: 50000 }] },
                    { id: 2, total: 150000, items: [{ name: "Coca", quantity: 3, price: 50000 }] }
                ]
            },
            {
                name: "Tran Thi B",
                email: "b@gmail.com",
                hoadon: [
                    { id: 3, total: 300000, items: [{ name: "Phở", quantity: 3, price: 100000 }] }
                ]
            }
        ]));

        // Lấy dữ liệu từ localStorage
        function getAccounts() {
            return JSON.parse(localStorage.getItem('accounts')) || [];
        }

        // Tính toán thống kê
        function calculateStatistics() {
            const accounts = getAccounts();
            let totalCustomers = accounts.length;
            let totalOrders = 0;
            let totalRevenue = 0;

            accounts.forEach(account => {
                totalOrders += account.hoadon.length;
                account.hoadon.forEach(order => {
                    totalRevenue += order.total;
                });
            });

            return { totalCustomers, totalOrders, totalRevenue };
        }

        // Thống kê sản phẩm bán chạy
        function calculateTopProducts() {
            const accounts = getAccounts();
            let productSales = {};

            accounts.forEach(account => {
                account.hoadon.forEach(order => {
                    order.items.forEach(item => {
                        if (!productSales[item.name]) {
                            productSales[item.name] = 0;
                        }
                        productSales[item.name] += item.quantity;
                    });
                });
            });

            // Sắp xếp theo số lượng bán
            return Object.entries(productSales)
                .sort((a, b) => b[1] - a[1])
                .map(([name, quantity]) => ({ name, quantity }));
        }

        // Hiển thị thống kê tổng quan
        function displayStatistics() {
            const stats = calculateStatistics();
            document.getElementById('total-customers').innerText = stats.totalCustomers;
            document.getElementById('total-orders').innerText = stats.totalOrders;
            document.getElementById('total-revenue').innerText = stats.totalRevenue.toLocaleString();
        }

        // Hiển thị danh sách hóa đơn
        function displayOrders() {
            const accounts = getAccounts();
            const orderList = document.getElementById('order-list');
            orderList.innerHTML = "";

            accounts.forEach(account => {
                account.hoadon.forEach(order => {
                    orderList.innerHTML += `
                        <div class="order">
                            <h4>Khách hàng: ${account.name} (${account.email})</h4>
                            <p>Hóa đơn #${order.id}: ${order.total.toLocaleString()}₫</p>
                            <p>Sản phẩm:</p>
                            <ul>
                                ${order.items.map(item => `<li>${item.name} x ${item.quantity} (đơn giá: ${item.price.toLocaleString()}₫)</li>`).join('')}
                            </ul>
                        </div>
                    `;
                });
            });
        }

        // Hiển thị sản phẩm bán chạy
        function displayTopProducts() {
            const topProducts = calculateTopProducts();
            const topProductsList = document.getElementById('top-products');
            topProductsList.innerHTML = "";

            topProducts.forEach(product => {
                topProductsList.innerHTML += `<li>${product.name}: ${product.quantity} sản phẩm</li>`;
            });
        }

        // Gọi các hàm hiển thị khi trang tải xong
        window.onload = () => {
            displayStatistics();
            displayOrders();
            displayTopProducts();
        };
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý hóa đơn</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        h2, h3 {
            color: #333;
        }
        .section {
            margin-bottom: 30px;
        }
        .stats, .orders {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            background: #f9f9f9;
        }
        .order {
            border-bottom: 1px solid #ddd;
            padding: 10px 0;
        }
        .order:last-child {
            border-bottom: none;
        }
        .order h4 {
            margin: 0;
        }
        .order p {
            margin: 5px 0;
        }
        .highlight {
            font-weight: bold;
            color: #007bff;
        }
    </style>
</head>
<body>
    <h1>Quản lý hóa đơn</h1>

    <!-- Thống kê tổng quan -->
    <div class="section">
        <h2>Thống kê tổng quan</h2>
        <div class="stats">
            <p><span class="highlight" id="total-customers">0</span> khách hàng</p>
            <p><span class="highlight" id="total-orders">0</span> hóa đơn</p>
            <p>Tổng doanh thu: <span class="highlight" id="total-revenue">0</span>₫</p>
        </div>
    </div>

    <!-- Danh sách hóa đơn -->
    <div class="section">
        <h2>Danh sách hóa đơn</h2>
        <div id="order-list" class="orders">
            <!-- Hóa đơn sẽ được hiển thị tại đây -->
        </div>
    </div>

    <!-- Sản phẩm bán chạy -->
    <div class="section">
        <h2>Sản phẩm bán chạy</h2>
        <ul id="top-products">
            <!-- Sản phẩm bán chạy sẽ được hiển thị tại đây -->
        </ul>
    </div>

    <script>
        // Mô phỏng dữ liệu từ localStorage
        localStorage.setItem('accounts', JSON.stringify([
            {
                name: "Nguyen Van A",
                email: "a@gmail.com",
                hoadon: [
                    { id: 1, total: 200000, items: [{ name: "Bánh mì", quantity: 2, price: 50000 }] },
                    { id: 2, total: 150000, items: [{ name: "Coca", quantity: 3, price: 50000 }] }
                ]
            },
            {
                name: "Tran Thi B",
                email: "b@gmail.com",
                hoadon: [
                    { id: 3, total: 300000, items: [{ name: "Phở", quantity: 3, price: 100000 }] }
                ]
            }
        ]));

        // Lấy dữ liệu từ localStorage
        function getAccounts() {
            return JSON.parse(localStorage.getItem('accounts')) || [];
        }

        // Tính toán thống kê
        function calculateStatistics() {
            const accounts = getAccounts();
            let totalCustomers = accounts.length;
            let totalOrders = 0;
            let totalRevenue = 0;

            accounts.forEach(account => {
                totalOrders += account.hoadon.length;
                account.hoadon.forEach(order => {
                    totalRevenue += order.total;
                });
            });

            return { totalCustomers, totalOrders, totalRevenue };
        }

        // Thống kê sản phẩm bán chạy
        function calculateTopProducts() {
            const accounts = getAccounts();
            let productSales = {};

            accounts.forEach(account => {
                account.hoadon.forEach(order => {
                    order.items.forEach(item => {
                        if (!productSales[item.name]) {
                            productSales[item.name] = 0;
                        }
                        productSales[item.name] += item.quantity;
                    });
                });
            });

            // Sắp xếp theo số lượng bán
            return Object.entries(productSales)
                .sort((a, b) => b[1] - a[1])
                .map(([name, quantity]) => ({ name, quantity }));
        }

        // Hiển thị thống kê tổng quan
        function displayStatistics() {
            const stats = calculateStatistics();
            document.getElementById('total-customers').innerText = stats.totalCustomers;
            document.getElementById('total-orders').innerText = stats.totalOrders;
            document.getElementById('total-revenue').innerText = stats.totalRevenue.toLocaleString();
        }

        // Hiển thị danh sách hóa đơn
        function displayOrders() {
            const accounts = getAccounts();
            const orderList = document.getElementById('order-list');
            orderList.innerHTML = "";

            accounts.forEach(account => {
                account.hoadon.forEach(order => {
                    orderList.innerHTML += `
                        <div class="order">
                            <h4>Khách hàng: ${account.name} (${account.email})</h4>
                            <p>Hóa đơn #${order.id}: ${order.total.toLocaleString()}₫</p>
                            <p>Sản phẩm:</p>
                            <ul>
                                ${order.items.map(item => `<li>${item.name} x ${item.quantity} (đơn giá: ${item.price.toLocaleString()}₫)</li>`).join('')}
                            </ul>
                        </div>
                    `;
                });
            });
        }

        // Hiển thị sản phẩm bán chạy
        function displayTopProducts() {
            const topProducts = calculateTopProducts();
            const topProductsList = document.getElementById('top-products');
            topProductsList.innerHTML = "";

            topProducts.forEach(product => {
                topProductsList.innerHTML += `<li>${product.name}: ${product.quantity} sản phẩm</li>`;
            });
        }

        // Gọi các hàm hiển thị khi trang tải xong
        window.onload = () => {
            displayStatistics();
            displayOrders();
            displayTopProducts();
        };
    </script>
</body>
</html>
